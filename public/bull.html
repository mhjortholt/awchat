<!DOCTYPE html>
<html>
  <head><title>getUserMedia</title></head>
  <body>
    
    <!--<button id="connect" style="display: none">connect</button><br/>-->
<!--
    <label>Enter Message:</label><br/>
    <textarea id="yourMessage"></textarea>
    <button id="send">send</button>
    <pre id="messages"></pre><br />
    <button id="play">PLAY</button><br/>
-->
    <!--<video id="video" playsinline autoplay></video>-->

    <script>


/*
    var initiator = location.hash === '#init';
    if(initiator) {
      $('#connect').show();
    }




    navigator.mediaDevices.getUserMedia({video: { facingMode: "user" }, audio: true})
    .then(function(stream) {

        var peer = new SimplePeer({
          initiator: initiator,
          trickle: false,
          stream: stream
        })

        peer.on('signal', function (data) {
          //sdocument.getElementById('yourId').value = JSON.stringify(data)

          var p = {
            id: id,
            data: data,
            user: location.hash === '#init' ? 0 : 1
          };

          $.ajax({
            url: '/api/addme',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(p),
            success: function(response){
              console.log(response);
              
            }
          })
        })

        document.getElementById('connect').addEventListener('click', function () {
          connect();
        });

        function connect() {
          $.ajax({
            url: '/api/get',
            type: 'GET',
            contentType: 'application/json',
            success: function(response){
              console.log(response)
              var data = response[initiator ? 1 : 0].data;
              //document.getElementById('otherId').value = JSON.stringify(data);

              var otherId = data
              peer.signal(otherId)

            }
          })
        }

        */
/*
        document.getElementById('send').addEventListener('click', function () {
          var yourMessage = document.getElementById('yourMessage').value
          peer.send(yourMessage)
        })

        peer.on('data', function (data) {
          document.getElementById('messages').textContent += data + '\n'
        })
*/

/*
        peer.on('stream', function (stream) {

          if ('srcObject' in video) {
            video.srcObject = stream
          } else {
            video.src = window.URL.createObjectURL(stream) // for older browsers
          }

          video.play()
        });

        peer.on('connectionstatechange', function() {
            if(peer.connectionState == 'disconnected') {
                console.log('Disconnected');
            }
        })

        if(!initiator) connect();

    })
    .catch(function(err) {
      
      console.error(err)
    });
*/


    </script>
  </body>
</html>